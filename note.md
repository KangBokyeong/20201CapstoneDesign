# 2020년도 1학기 캡스톤디자인
-  수행기간 : 2020년 3월 16일 ~ 2020년 6월 19일
## Information 
- 과제명 : 혈관나이 예측 알고리즘 개발
- 팀 명 : 말괄량이
- 팀대표 : 강보경
- 학번, 학과 : 20175103, 소융대 빅데이터전공
- 지도교수 : 안재목 교수님

## 참고 자료(프로그래밍 전 사전 공부)
- 현재 프로그래밍은 틀 정도 만들어 놓고 처음으로 접해보는 분야이기에 ppg와 apg를 열심히 검색해가며 공부중이다... 중간평가 이후에는 프로그래밍에 들어갈 수 있도록 노력할 것이다.
- [Noninvasive Vascular Diagnosis: A Practical Textbook for Clinicians](https://books.google.co.kr/books?id=4EQ4DwAAQBAJ&pg=PA530&lpg=PA530&dq=ppg+apg+abcde&source=bl&ots=A8oLh_ljNe&sig=ACfU3U2N47kNhI3Powog5uH94d8EtVEqQg&hl=ko&sa=X&ved=2ahUKEwjTza3X34vpAhVQG6YKHb2aDYcQ6AEwC3oECAoQAQ#v=onepage&q=ppg%20apg%20abcde&f=false)
- [Noninvasive Vascular Diagnosis: A Practical Guide to Therapy
](https://books.google.co.kr/books?id=idHprbBeQngC&pg=PA468&lpg=PA468&dq=ppg+apg+abcde&source=bl&ots=ABH7Izo7G5&sig=ACfU3U2YoLQxfFQ7THfNbsTwfr57RryClQ&hl=ko&sa=X&ved=2ahUKEwjTza3X34vpAhVQG6YKHb2aDYcQ6AEwD3oECAgQAQ#v=onepage&q=ppg%20apg%20abcde&f=false)
- 위 자료가 원문이라 해석해가며 공부하고 있다.
## 프로젝트 내용
### 과제 목적
혈관으로 자신의 건강상태를 파악해 현재 노화속도 및 혈관 상태를 파악함으로써 더 늙기 전에 건강을 챙길 수 있도록 한다. 이는 어르신들뿐만 아니라 모든 사람들에게 해당하며 분석을 통해 사람들이 자신의 혈관 나이를 파악하여 늦제 않게 대처하길 바란다.
### 과제 내용
a, b, c, d, e 값 찾을 때, 처음에는 그래프를 여러 번 보고 x축 값을 임의로 정해서 구했었다. 하지만 다른 데이터를 분석했을 때 엉뚱한 결과가 나왔다. 그것은 다시 분석해 보아야 하는 기준점이 될 수 있었다. 분석방법을 달리한 결과 다른 데이터도 비슷한 결과로 도출할 수 있었다. 분석방법은 다음의 순서도로 설명이 될 수 있다. 우선 a를 먼저 찾아야 하는데 a와 최댓값을 동일하게 설정을 하여 찾도록 하였다. a를 찾은 시점으로부터 b를 찾아야하는데, b는 최솟값이 된다. 감소하다가 다시 증가하는 지점을 b로 저장하고 c는 반대로 증가하다가 다시 감소하는 지점, d는 b와 마찬가지로 감소하다가 증가하는 지점, e는 c와 동일한 방법으로 찾았다. 방법론을 순서도로 간략하게 나타내면 <그림 1> 과 같이 나오는 것을 확인할 수 있다.  
![flowchart](https://user-images.githubusercontent.com/44868847/84569344-b7f78700-adc0-11ea-927c-98a74bb17ea5.png)  
<그림 1> a,b,c,d,e 값을 찾는 순서도  
 앞서 찾은 다섯 개의 값을 이용해 공식에 대입하여 나이 지수를 계산을 하면 결과 값을 얻을 수 있도록 하였다.  
![first_screen](https://user-images.githubusercontent.com/44868847/84569383-086ee480-adc1-11ea-842f-d659bcf65e26.png)  
<그림 2> 실행 파일 선택 화면  
![second_screen](https://user-images.githubusercontent.com/44868847/84569400-2e948480-adc1-11ea-955b-8803d07e0c84.png)  
<그림 3> 실행 결과 화면  
  <그림 2> 의 화면에서 각각의 파일을 선택하고 나이를 입력해 실행을 누르면 <그림 3>의 실행 결과 화면이 나타난다. <그림 3>에서는 파일에 값을 그래프로 나타내 사용자에게 모양을 한눈에 볼  수 있도록 하였다. 그래프에서 값을 추출하여 “당신의 혈관 나이는?”버튼을 눌렀을 때, 나이 지수와 혈관 나이가 화면에 나타나도록 되어있다. 또한, 자신의 입력한 나이에 따라 혈관 나이 차이를 계산하여 혈관 상태를 이미지로 나타내었다. 혈관 상태는 크게 심각, 보통, 좋음 이 세 단계로 나누었다.  
![run_order](https://user-images.githubusercontent.com/44868847/84569409-4f5cda00-adc1-11ea-8341-6fd8fe908eff.png)  
<그림 4> 실행 순서  
실행 파일을 열면 <그림 4>와 같은 순서로 실행이 된다. 프로그램 실행 시, <그림 2>와 같이 나이 입력 및 파일 선택하는 화면이 열린다. 그리고 실행을 누르면, <그림 3>와 같은 화면이 나온다. 이때, 나이 지수와 혈관 나이는 버튼을 누르고 나서 화면에 나타난다. 
 장점이라고 하면 사용자 입장에서 수치만 보는 것보다 그래프를 한눈에 볼 수 있고, 그래프의 값을 알아서 찾아주고 찾아준 값을 이용해 자동으로 계산해서 자신의 혈관 상태를 나타내 주기 때문에 이용이 편리하다고 볼 수 있다. 혈관 상태의 결과를 이미지로 나타냄으로서 사용자 측면에서 직관적으로 판단할 수 있도록 한 점이 가장 큰 특이점이라고 생각한다. 자신의 나이와 계산된 혈관 나이의 차이를 이용해 앞서 설명한 세 단계로 구분을 할 수 있다.  
 APG(Accelerated Photoplethysmograph)란 심장 박동에 따른 흉벽 및 대혈관의 박동을 파형화 한 것을 맥파(Photoplethysmograph)라고 한다. 혈관 및 혈액순환 상태에 따라 맥파 파형의 변화가 생기나 맥파 파형은 기선이 안정적이지 못하고 변고점이 뚜렷하지 않다는 문제가 있어서 맥파를 두 번 미분한 가속도 맥파를 바탕으로 혈관건강 상태를 분석할 수 있다. APG의 측정방식은 근적외선 광선을 생체 조직을 투과하기 쉽고, 혈액 중 산화헤모글로빈에 흡수되기 쉬우므로 피검 부위에 근적외선을 조사하여 반사광을 검출하는 반사식과 투과광을 검출하는 투과식이 있다. 장비를 통해 손가락 끝부분의 적외선 흡광량을 보는 투과법으로 심박출에 따른 혈관 내 혈액의 정도를 알 수 있다.  
 연령별 혈관의 건강도는 입력한 나이와 계산된 나이의 차이가 -10에서 -5사이면 좋은 단계이고 -4에서 4사이면 보통 단계, 5에서 10사이면 심각 단계로 나뉘며 건강도를 나타낸다. 즉, 20대면 17세와 30세 사이의 혈관 나이가 나오고, 30대면 20세와 40세 사이의 혈관 나이가 나온다. 실제 나이와 차이가 심하면 심할수록 노화 속도가 빠르단 소리고, 그 말은 건강관리를 해야 한다는 의미가 된다. 또한 나이 지수가 음수로 나올수록 혈관 상태는 좋은 것이다. 
### 활용 방안 및 기대효과
 기존에는 혈관 상태만 보여줬다면 자신의 나이를 입력해 나이 지수와 혈관 나이를 출력함으로서 쉽게 판단할 수 있다. 분석한 데이터를 통해 사람들이 결과를 한눈에 보고 자기 자신의 혈관 상태를 파악하여 관리를 할 수 있다.  
